<%- model_class = User -%>
<div class="page-header">
  <h1><%= t '.title', default: t("helpers.titles.index", class: t('users.users') ) %></h1>
</div>
<table class="table table-striped">
  <thead>
  <tr>
    <th><%= model_class.human_attribute_name(:email) %></th>
    <th><%= model_class.human_attribute_name(:prename) %></th>
    <th><%= model_class.human_attribute_name(:surname) %></th>
    <th><%= t 'workinghours' %>(<%= Tracking.human_attribute_name(:billable) %>)</th>
    <th><%= model_class.human_attribute_name(:current_sign_in_at) %></th>
    <th><%= model_class.human_attribute_name(:current_sign_in_ip) %></th>
    <th><%= t '.actions', default: t("helpers.actions") %></th>
  </tr>
  </thead>
  <tbody>
  <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.prename %></td>
        <td><%= user.surname %></td>
        <td><%= "#{duration_in_words(user.workinghours)} (#{duration_in_words(user.billable_workinghours) || 0})".html_safe %></td>
        <td><%= l(user.current_sign_in_at, format: :short) %></td>
        <td><%= user.current_sign_in_ip %></td>
        <td>
          <% if allow?("users", "show") %>
            <%= link_to t('.show', default: t("helpers.links.show")), user_path(user), class: 'button button-mini' %>
          <% end %>
          <% if allow?("users", "edit") %>
            <%= link_to t('.edit', default: t("helpers.links.edit")), edit_user_path(user), class: 'button button-mini button-warning' %>
          <% end %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>